(()=>{"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(l)throw a}}return o}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=window.getGenie.Components.Common,c=l.Libs,u=l.ContentFeedback,s=l.Utilities,d=window.antd,m=d.Alert,p=d.Form,g=d.Tooltip,f=window.getGenie.Components.Common.RequestManager,b=f.HandleFetch,y=f.HandleResponse,v=f.EndPoints,w=window.getGenie.Components.Common.ReduxManager.ComposeComponents,h=s.GenieHelpers,O=wp.element,S=O.useState,E=O.useEffect,C=wp.i18n.__,R=[{name:"templateContext",label:"Context",type:"textarea",placeholder:"Enter your text here",required:!0}];const T=w((function(e){var n=e.setSidebar,i=e.templates,l=e.sidebar,s=e.getInputs,d=e.setInput,f=s.generatedTemplateContents||[];f=a(new Set(f));var w=r(S([]),2),O=w[0],T=w[1],j=r(S(""),2),P=j[0],I=j[1],x=r(S(!1),2),k=x[0],A=x[1],L=r(S(R),2),N=L[0],G=L[1],D=r(S(!1),2),z=D[0],F=D[1],W=r(S([]),2),_=W[0],M=W[1];E((function(){var e=i.list.map((function(e){return{value:e.templateSlug,label:e.title,inputFields:(null==e?void 0:e.inputFields)||[]}}));T(e),n({analyzeKeyword:{open:!1},generatedOutlines:t(t({},l.generatedOutlines),{},{open:!1})})}),[]),E((function(){var e,t,n;if(l.open){var r=i.list.find((function(e){return e.templateSlug===l.currentTemplate})),a=null==r?void 0:r.inputFields;a&&0!==a.length||(a=R);var o=null===(e=a[0])||void 0===e?void 0:e.name;G(a),M(null==r?void 0:r.unsupportedLanguages),l.existingInputValue&&d(o,l.existingInputValue);var c=null===(t=wp.data.select("core/block-editor"))||void 0===t?void 0:t.getSelectedBlock();if(c){var u=(null==c||null===(n=c.attributes)||void 0===n?void 0:n.content)||"";if("next-paragraph"===l.currentTemplate)(u=u.replace(/<br\s*[\/]?>/g,"")).length>1e3&&(u=u.substring(0,1e3)),d(o,u);else if("next-sentence"===l.currentTemplate){var s=document.getSelection(),m=s.focusNode.data||"",p=m.substring(0,s.focusOffset);""===(p=(p=p.substring(0,p.lastIndexOf("."))).substring(p.lastIndexOf(".")+1)).length&&(p=m.substring(0,p.indexOf("."))),""===p.length&&(p=m.substring(0,s.focusOffset)),d(o,p)}}}}),[l.currentTemplate,l.open]);E((function(){l.open||l.rootContainer.querySelectorAll(".ant-tooltip.generated-content-copied-text").forEach((function(e){return e.style.visibility="hidden"}))}),[l.open]);var q=window.getGenie.config.isBlockEditor;return React.createElement(React.Fragment,null,React.createElement(c.DrawerHeader,null),React.createElement(p,{layout:"vertical",className:"getgenie-sidebar-writing-form",onFinish:function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(c)throw i}}}}(N);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.name]=s[a.name]||""}}catch(c){r.e(c)}finally{r.f()}var i={input:n,templateSlug:l.currentTemplate,creativity:s.templateCreativityLevel,resultCount:s.templateResultLimit};delete i.templateCreativityLevel,delete i.templateResultLimit,F(!0),b((function(e){F(!1),y(e,(function(){var t,n=e.data.map((function(e){return{title:e,like:!1,dislike:!1}}));d("generatedTemplateContents",n),A(!0),setTimeout((function(){return A(!1)}),4e3);var r=i;null==r||delete r.resultCount,r.output=e.data,r.templateType="writer-default",fetch(v.createHistoryUrl,{method:"POST",body:JSON.stringify(r),headers:{"Content-type":"application/json; charset=UTF-8","X-WP-Nonce":(null===(t=window.getGenie.config)||void 0===t?void 0:t.restNonce)||""}})}))}),"writeTemplates",i)}},React.createElement("div",{className:"getgenie-sidebar-writing"},React.createElement(c.Select,{handleOnChange:function(e){n({currentTemplate:e})},name:"selectedTemplate",className:"getgenie-template-select",defaultValue:l.currentTemplate,label:"Select template",options:O}),N.map((function(e){return React.createElement(c.Textarea,{label:React.createElement("span",null,(null==e?void 0:e.label)||""," ",null!=e&&e.required?React.createElement("span",{style:{display:"inline-block",color:"red"}},"*"):"(".concat(C("Optional","getgenie"),")")),name:null==e?void 0:e.name,rows:4,placeholder:null==e?void 0:e.placeholder,required:null==e?void 0:e.required})})),React.createElement(c.Select,{className:"getgenie-language",handleOnChange:function(e){return h.saveCurrentLanguage(e)},name:"selectedLanguage",except:_,label:C("Select language","getgenie"),options:l.languages,defaultValue:l.currentLanguage}),React.createElement(c.Slider,{name:"templateCreativityLevel",label:React.createElement(React.Fragment,null,C("Creativity Level","getgenie")," ",React.createElement(c.Tooltip,{title:C("How much creative you want genie to be","getgenie"),placement:"top"},"i")),message:!1,defaultValue:4}),React.createElement(c.NumberInput,{name:"templateResultLimit",max:4,type:"text",defaultValue:2,label:React.createElement(React.Fragment,null,C("Set Result Limit","getgenie")," ",React.createElement(c.Tooltip,{title:C("Maximum content you want to generate","getgenie"),placement:"top"},"i")),required:!0,errorMessage:C("Please choose valid limit","getgenie")}),React.createElement(c.Button,{htmlType:"submit",type:"primary",loading:z},C("Write","getgenie"))),React.createElement("div",{className:"getgenie-card-container editor",style:{backgroundColor:0===f.length&&"transparent"}},React.createElement(c.Card,{list:f,handleClick:function(e,t){l.rootContainer.querySelectorAll(".ant-tooltip.generated-content-copied-text").forEach((function(e){return e.style.visibility="visible"}));var n=t.title.replace(/<br\/>/g,"");h.copyToClipboard(n).then((function(){I(t.title),setTimeout((function(){I(null)}),2e3)}))["catch"]((function(){return console.log("error")}))},column:1,skeleton:z?function(){return React.createElement(c.SkeletonSingle,{count:5})}:""},(function(e){var t;return React.createElement(React.Fragment,null,React.createElement(g,{overlayClassName:"generated-content-copied-text",placement:"right",title:P===e.title&&"Copied",visible:P===e.title&&l.open,zIndex:999999},React.createElement("h5",{className:"generated-content"},React.createElement("div",{dangerouslySetInnerHTML:{__html:e.title}}))),React.createElement(u,{content:e,input:s[null===(t=N[0])||void 0===t?void 0:t.name]||"",creativityLevel:s.templateCreativityLevel,listName:"generatedTemplateContents"}),q&&React.createElement(g,{title:"Insert this content",placement:"topLeft"},React.createElement("span",{className:"getgenie-insert-content getgenie-icon-plus",onClick:function(t){return function(e,t){e.stopPropagation(),l.insertTextCallback&&l.insertTextCallback(t,l.insertTextField)}(t,e.title)}})))})),k&&React.createElement(m,{className:"template-screen-alert",message:C("Click on the text to copy","getgenie"),closeText:C("Okay","getgenie"),closable:!0}))),l.toolbarWriting||"#write-for-me"===window.location.hash?"":React.createElement(c.DrawerFooter,{prevScreen:"TemplateListScreen"}))}),["setSidebar","templates","sidebar","getInputs","setInput"]);const j=[{title:"Blog Wizard",templateSlug:"blogWizard",description:"Get your blog article SERP-ready â€” from analyzing the keywords to generating content that ranks",categories:{general:{title:"General",slug:"general"}}},{title:"WooCommerce Wizard",templateSlug:"wooWizard",description:"Get conversion-friendly & SEO-optimized content for WooCommerce Product pages",categories:{general:{title:"General",slug:"general"}}}];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(l)throw a}}return o}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=window.getGenie.Components.Common,D=G.Libs,z=G.LicenseNotice,F=window.antd,W=F.Divider,_=F.Typography,M=F.Input,q=window.getGenie.Components.Common.ReduxManager.ComposeComponents,H=wp.element,U=H.useEffect,V=H.useState,B=wp.i18n.__;const K=q((function(e){var t=e.templates,n=e.setSidebar,r=e.sidebar,a=e.setInput,o=e.getTemplateInputs,i=e.resetTemplateInputs,l=A(V(t.list),2),c=l[0],u=l[1],s=[].concat(k(j),k(c));U((function(){n({analyzeKeyword:{open:!1},generatedOutlines:I(I({},r.generatedOutlines),{},{open:!1})}),n({toolbarWriting:!1}),a("updateContent","")}),[]);return React.createElement(React.Fragment,null,React.createElement(D.DrawerHeader,null),React.createElement("div",{className:"getgenie-sidebar-template"},React.createElement(z,null),React.createElement(_.Title,{level:3},B("What are we writing","getgenie")),React.createElement(W,null),React.createElement("div",{className:"getgenie-template-list"},React.createElement(M,{onChange:function(e){var n=e.target.value.toLowerCase(),r=t.list.filter((function(e){return e.title.toLowerCase().includes(n)}));u(r)},bordered:!1,className:"search-container",placeholder:"".concat(B("Search","getgenie"),"..."),suffix:React.createElement("span",{className:"getgenie-icon-search"})}),React.createElement(D.Card,{list:s,handleClick:function(e,t){var r,a,l,c,u="WriteTemplatesScreen";if("blogWizard"==t.templateSlug){if(u="TitleScreen","post"!==(null===(a=window.getGenie.config)||void 0===a?void 0:a.wizardScreen))return void window.open(null===(l=window.getGenie.config)||void 0===l||null===(c=l.wizardScreenUrl)||void 0===c?void 0:c.post,"_blank")}else if("wooWizard"==t.templateSlug){var s,d,m,p;if(null===(s=window.getGenie.config)||void 0===s||!s.wcActivated)return void D.ErrorModal({title:B("Plugin not found!","getgenie"),content:B("WooCommerce is not installed or activated yet.","getgenie")});if(u="wooProductTitle","woo_product"!==(null===(d=window.getGenie.config)||void 0===d?void 0:d.wizardScreen))return void window.open(null===(m=window.getGenie.config)||void 0===m||null===(p=m.wizardScreenUrl)||void 0===p?void 0:p.woo_product,"_blank")}var g=function(){n({component:u,currentTemplate:t.templateSlug})};null!==(r=o[t.templateSlug])&&void 0!==r&&r.keyword?D.ConfirmModal(B("This wizard has generated data","getgenie"),B("Do you want to erase that data?","getgenie"),(function(){i(t.templateSlug),g()}),g):g()}},(function(e){return React.createElement(React.Fragment,null,React.createElement("div",{className:"card-container"},React.createElement("div",{className:"card-icon"},React.createElement("span",{className:"getgenie-icon-Edit"})),React.createElement("div",{className:"card-heading"},React.createElement("h5",{"data-slug":null==e?void 0:e.templateSlug},null==e?void 0:e.title),React.createElement("p",null,null==e?void 0:e.description))))})))))}),["setSidebar","sidebar","templates","setInput","getInputs","resetTemplateInputs","getTemplateInputs"]);window.getGenie.Components.Common.Libs,wp.i18n.__;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.getGenie.Components=J(J({},window.getGenie.Components),{},{Sidebar:J(J({},window.getGenie.Components.Sidebar||{}),{},{TemplateListScreen:K,WriteTemplatesScreen:T})})})();